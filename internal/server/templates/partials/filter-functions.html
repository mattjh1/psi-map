{{define "filter-functions"}}
function initializeFilters() {
    const tabs = document.querySelectorAll('#strategyTabs .nav-link');
    tabs.forEach(tab => {
        tab.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Update active tab
            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            // Filter table rows
            const strategy = this.getAttribute('data-strategy');
            filterTable(strategy);
        });
    });
}

function initializeSearch() {
    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const activeStrategy = document.querySelector('#strategyTabs .nav-link.active').getAttribute('data-strategy');
        filterTable(activeStrategy, searchTerm);
    });
}

function filterTable(strategy, searchTerm = '') {
    const rows = document.querySelectorAll('#resultsTable tbody tr');
    
    rows.forEach(row => {
        const rowStrategy = row.getAttribute('data-strategy');
        const rowUrl = row.getAttribute('data-url').toLowerCase();
        
        const strategyMatch = strategy === 'all' || rowStrategy === strategy;
        const searchMatch = searchTerm === '' || rowUrl.includes(searchTerm);
        
        row.style.display = (strategyMatch && searchMatch) ? '' : 'none';
    });
}
{{end}}
